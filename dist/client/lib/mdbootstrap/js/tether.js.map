{"version":3,"sources":["../../../../../src/client/lib/mdbootstrap/js/tether.js"],"names":["root","factory","define","amd","exports","module","require","Tether","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","TetherBase","undefined","modules","getScrollParent","el","computedStyle","getComputedStyle","position","parent","parentNode","style","err","_style","overflow","overflowX","overflowY","test","indexOf","document","body","uniqueId","id","zeroPosCache","getOrigin","doc","node","_tetherZeroElement","createElement","setAttribute","extend","top","left","appendChild","getAttribute","rect","getBoundingClientRect","k","defer","getBounds","documentElement","ownerDocument","docEl","box","origin","width","scrollWidth","right","height","scrollHeight","bottom","clientTop","clientLeft","clientWidth","clientHeight","getOffsetParent","offsetParent","getScrollBarSize","inner","outer","pointerEvents","visibility","widthContained","offsetWidth","widthScroll","removeChild","out","arguments","args","Array","push","apply","slice","forEach","obj","hasOwnProperty","call","removeClass","name","classList","split","cls","trim","remove","regex","RegExp","join","className","getClassName","replace","setClassName","addClass","add","hasClass","contains","SVGAnimatedString","baseVal","updateClasses","all","deferred","fn","flush","pop","Evented","value","on","event","handler","ctx","once","bindings","off","splice","trigger","_len","_key","_bindings$event$i","context","Utils","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_i","Symbol","iterator","_s","next","done","isArray","Error","_TetherBase$Utils","within","a","b","diff","transformKey","transforms","tethers","tether","now","performance","Date","lastCall","lastDuration","pendingTimeout","tick","Math","min","setTimeout","clearTimeout","window","addEventListener","MIRROR_LR","center","MIRROR_TB","middle","OFFSET_MAP","autoToFixedAttachment","attachment","relativeToAttachment","attachmentToOffset","addOffset","offsets","_ref","parseFloat","offsetToPx","offset","size","parseOffset","_value$split","_value$split2","parseAttachment","TetherClass","options","_this","bind","history","setOptions","initialize","getClass","classes","classPrefix","_this2","pos","defaults","targetOffset","targetAttachment","_options","element","targetModifier","jquery","querySelector","addTargetClasses","scrollParent","disable","enabled","enable","getTargetBounds","pageYOffset","pageXOffset","innerHeight","innerWidth","bounds","hasBottomScroll","scrollBottom","borderTopWidth","borderBottomWidth","borderLeftWidth","fitAdj","pow","max","scrollPercentage","scrollTop","clearCache","_cache","cache","getter","removeEventListener","destroy","_this3","updateAttachClasses","elementAttach","targetAttach","_this4","sides","_addAttachClasses","side","_this5","flushChanges","elementPos","lastSize","_lastSize","targetPos","targetSize","manualOffset","manualTargetOffset","_module2","ret","scrollbarSize","page","viewport","parentElement","optimizations","moveElement","offsetPosition","offsetParentStyle","offsetParentSize","offsetBorder","toLowerCase","scrollLeft","move","unshift","_this6","same","type","found","point","css","transcribe","_same","_pos","hasOptimizations","gpu","yPos","xPos","round","moved","offsetParentIsBody","currentNode","tagName","writeCSS","write","val","elVal","BOUNDS_FORMAT","getBoundingRect","to","nodeType","toUpperCase","substr","constraints","targetHeight","targetWidth","allClasses","constraint","outOfBoundsClass","pinnedClass","addClasses","tAttachment","eAttachment","pin","changeAttachX","changeAttachY","_attachment$split","_attachment$split2","map","p","pinned","oob","oobClass","abutted","targetPosSide","shift","shiftTop","shiftLeft","_shift","_shift2"],"mappings":"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","file":"tether.js","sourcesContent":["/*! tether 1.2.0 */\r\n\r\n(function(root, factory) {\r\n  if (typeof define === 'function' && define.amd) {\r\n    define(factory);\r\n  } else if (typeof exports === 'object') {\r\n    module.exports = factory(require, exports, module);\r\n  } else {\r\n    root.Tether = factory();\r\n  }\r\n}(this, function(require, exports, module) {\r\n\r\n'use strict';\r\n\r\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\r\n\r\nvar TetherBase = undefined;\r\nif (typeof TetherBase === 'undefined') {\r\n  TetherBase = { modules: [] };\r\n}\r\n\r\nfunction getScrollParent(el) {\r\n  // In firefox if the el is inside an iframe with display: none; window.getComputedStyle() will return null;\r\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=548397\r\n  var computedStyle = getComputedStyle(el) || {};\r\n  var position = computedStyle.position;\r\n\r\n  if (position === 'fixed') {\r\n    return el;\r\n  }\r\n\r\n  var parent = el;\r\n  while (parent = parent.parentNode) {\r\n    var style = undefined;\r\n    try {\r\n      style = getComputedStyle(parent);\r\n    } catch (err) {}\r\n\r\n    if (typeof style === 'undefined' || style === null) {\r\n      return parent;\r\n    }\r\n\r\n    var _style = style;\r\n    var overflow = _style.overflow;\r\n    var overflowX = _style.overflowX;\r\n    var overflowY = _style.overflowY;\r\n\r\n    if (/(auto|scroll)/.test(overflow + overflowY + overflowX)) {\r\n      if (position !== 'absolute' || ['relative', 'absolute', 'fixed'].indexOf(style.position) >= 0) {\r\n        return parent;\r\n      }\r\n    }\r\n  }\r\n\r\n  return document.body;\r\n}\r\n\r\nvar uniqueId = (function () {\r\n  var id = 0;\r\n  return function () {\r\n    return ++id;\r\n  };\r\n})();\r\n\r\nvar zeroPosCache = {};\r\nvar getOrigin = function getOrigin(doc) {\r\n  // getBoundingClientRect is unfortunately too accurate.  It introduces a pixel or two of\r\n  // jitter as the user scrolls that messes with our ability to detect if two positions\r\n  // are equivilant or not.  We place an element at the top left of the page that will\r\n  // get the same jitter, so we can cancel the two out.\r\n  var node = doc._tetherZeroElement;\r\n  if (typeof node === 'undefined') {\r\n    node = doc.createElement('div');\r\n    node.setAttribute('data-tether-id', uniqueId());\r\n    extend(node.style, {\r\n      top: 0,\r\n      left: 0,\r\n      position: 'absolute'\r\n    });\r\n\r\n    doc.body.appendChild(node);\r\n\r\n    doc._tetherZeroElement = node;\r\n  }\r\n\r\n  var id = node.getAttribute('data-tether-id');\r\n  if (typeof zeroPosCache[id] === 'undefined') {\r\n    zeroPosCache[id] = {};\r\n\r\n    var rect = node.getBoundingClientRect();\r\n    for (var k in rect) {\r\n      // Can't use extend, as on IE9, elements don't resolve to be hasOwnProperty\r\n      zeroPosCache[id][k] = rect[k];\r\n    }\r\n\r\n    // Clear the cache when this position call is done\r\n    defer(function () {\r\n      delete zeroPosCache[id];\r\n    });\r\n  }\r\n\r\n  return zeroPosCache[id];\r\n};\r\n\r\nfunction getBounds(el) {\r\n  var doc = undefined;\r\n  if (el === document) {\r\n    doc = document;\r\n    el = document.documentElement;\r\n  } else {\r\n    doc = el.ownerDocument;\r\n  }\r\n\r\n  var docEl = doc.documentElement;\r\n\r\n  var box = {};\r\n  // The original object returned by getBoundingClientRect is immutable, so we clone it\r\n  // We can't use extend because the properties are not considered part of the object by hasOwnProperty in IE9\r\n  var rect = el.getBoundingClientRect();\r\n  for (var k in rect) {\r\n    box[k] = rect[k];\r\n  }\r\n\r\n  var origin = getOrigin(doc);\r\n\r\n  box.top -= origin.top;\r\n  box.left -= origin.left;\r\n\r\n  if (typeof box.width === 'undefined') {\r\n    box.width = document.body.scrollWidth - box.left - box.right;\r\n  }\r\n  if (typeof box.height === 'undefined') {\r\n    box.height = document.body.scrollHeight - box.top - box.bottom;\r\n  }\r\n\r\n  box.top = box.top - docEl.clientTop;\r\n  box.left = box.left - docEl.clientLeft;\r\n  box.right = doc.body.clientWidth - box.width - box.left;\r\n  box.bottom = doc.body.clientHeight - box.height - box.top;\r\n\r\n  return box;\r\n}\r\n\r\nfunction getOffsetParent(el) {\r\n  return el.offsetParent || document.documentElement;\r\n}\r\n\r\nfunction getScrollBarSize() {\r\n  var inner = document.createElement('div');\r\n  inner.style.width = '100%';\r\n  inner.style.height = '200px';\r\n\r\n  var outer = document.createElement('div');\r\n  extend(outer.style, {\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    pointerEvents: 'none',\r\n    visibility: 'hidden',\r\n    width: '200px',\r\n    height: '150px',\r\n    overflow: 'hidden'\r\n  });\r\n\r\n  outer.appendChild(inner);\r\n\r\n  document.body.appendChild(outer);\r\n\r\n  var widthContained = inner.offsetWidth;\r\n  outer.style.overflow = 'scroll';\r\n  var widthScroll = inner.offsetWidth;\r\n\r\n  if (widthContained === widthScroll) {\r\n    widthScroll = outer.clientWidth;\r\n  }\r\n\r\n  document.body.removeChild(outer);\r\n\r\n  var width = widthContained - widthScroll;\r\n\r\n  return { width: width, height: width };\r\n}\r\n\r\nfunction extend() {\r\n  var out = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\r\n\r\n  var args = [];\r\n\r\n  Array.prototype.push.apply(args, arguments);\r\n\r\n  args.slice(1).forEach(function (obj) {\r\n    if (obj) {\r\n      for (var key in obj) {\r\n        if (({}).hasOwnProperty.call(obj, key)) {\r\n          out[key] = obj[key];\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  return out;\r\n}\r\n\r\nfunction removeClass(el, name) {\r\n  if (typeof el.classList !== 'undefined') {\r\n    name.split(' ').forEach(function (cls) {\r\n      if (cls.trim()) {\r\n        el.classList.remove(cls);\r\n      }\r\n    });\r\n  } else {\r\n    var regex = new RegExp('(^| )' + name.split(' ').join('|') + '( |$)', 'gi');\r\n    var className = getClassName(el).replace(regex, ' ');\r\n    setClassName(el, className);\r\n  }\r\n}\r\n\r\nfunction addClass(el, name) {\r\n  if (typeof el.classList !== 'undefined') {\r\n    name.split(' ').forEach(function (cls) {\r\n      if (cls.trim()) {\r\n        el.classList.add(cls);\r\n      }\r\n    });\r\n  } else {\r\n    removeClass(el, name);\r\n    var cls = getClassName(el) + (' ' + name);\r\n    setClassName(el, cls);\r\n  }\r\n}\r\n\r\nfunction hasClass(el, name) {\r\n  if (typeof el.classList !== 'undefined') {\r\n    return el.classList.contains(name);\r\n  }\r\n  var className = getClassName(el);\r\n  return new RegExp('(^| )' + name + '( |$)', 'gi').test(className);\r\n}\r\n\r\nfunction getClassName(el) {\r\n  if (el.className instanceof SVGAnimatedString) {\r\n    return el.className.baseVal;\r\n  }\r\n  return el.className;\r\n}\r\n\r\nfunction setClassName(el, className) {\r\n  el.setAttribute('class', className);\r\n}\r\n\r\nfunction updateClasses(el, add, all) {\r\n  // Of the set of 'all' classes, we need the 'add' classes, and only the\r\n  // 'add' classes to be set.\r\n  all.forEach(function (cls) {\r\n    if (add.indexOf(cls) === -1 && hasClass(el, cls)) {\r\n      removeClass(el, cls);\r\n    }\r\n  });\r\n\r\n  add.forEach(function (cls) {\r\n    if (!hasClass(el, cls)) {\r\n      addClass(el, cls);\r\n    }\r\n  });\r\n}\r\n\r\nvar deferred = [];\r\n\r\nvar defer = function defer(fn) {\r\n  deferred.push(fn);\r\n};\r\n\r\nvar flush = function flush() {\r\n  var fn = undefined;\r\n  while (fn = deferred.pop()) {\r\n    fn();\r\n  }\r\n};\r\n\r\nvar Evented = (function () {\r\n  function Evented() {\r\n    _classCallCheck(this, Evented);\r\n  }\r\n\r\n  _createClass(Evented, [{\r\n    key: 'on',\r\n    value: function on(event, handler, ctx) {\r\n      var once = arguments.length <= 3 || arguments[3] === undefined ? false : arguments[3];\r\n\r\n      if (typeof this.bindings === 'undefined') {\r\n        this.bindings = {};\r\n      }\r\n      if (typeof this.bindings[event] === 'undefined') {\r\n        this.bindings[event] = [];\r\n      }\r\n      this.bindings[event].push({ handler: handler, ctx: ctx, once: once });\r\n    }\r\n  }, {\r\n    key: 'once',\r\n    value: function once(event, handler, ctx) {\r\n      this.on(event, handler, ctx, true);\r\n    }\r\n  }, {\r\n    key: 'off',\r\n    value: function off(event, handler) {\r\n      if (typeof this.bindings !== 'undefined' && typeof this.bindings[event] !== 'undefined') {\r\n        return;\r\n      }\r\n\r\n      if (typeof handler === 'undefined') {\r\n        delete this.bindings[event];\r\n      } else {\r\n        var i = 0;\r\n        while (i < this.bindings[event].length) {\r\n          if (this.bindings[event][i].handler === handler) {\r\n            this.bindings[event].splice(i, 1);\r\n          } else {\r\n            ++i;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }, {\r\n    key: 'trigger',\r\n    value: function trigger(event) {\r\n      if (typeof this.bindings !== 'undefined' && this.bindings[event]) {\r\n        var i = 0;\r\n\r\n        for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\r\n          args[_key - 1] = arguments[_key];\r\n        }\r\n\r\n        while (i < this.bindings[event].length) {\r\n          var _bindings$event$i = this.bindings[event][i];\r\n          var handler = _bindings$event$i.handler;\r\n          var ctx = _bindings$event$i.ctx;\r\n          var once = _bindings$event$i.once;\r\n\r\n          var context = ctx;\r\n          if (typeof context === 'undefined') {\r\n            context = this;\r\n          }\r\n\r\n          handler.apply(context, args);\r\n\r\n          if (once) {\r\n            this.bindings[event].splice(i, 1);\r\n          } else {\r\n            ++i;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }]);\r\n\r\n  return Evented;\r\n})();\r\n\r\nTetherBase.Utils = {\r\n  getScrollParent: getScrollParent,\r\n  getBounds: getBounds,\r\n  getOffsetParent: getOffsetParent,\r\n  extend: extend,\r\n  addClass: addClass,\r\n  removeClass: removeClass,\r\n  hasClass: hasClass,\r\n  updateClasses: updateClasses,\r\n  defer: defer,\r\n  flush: flush,\r\n  uniqueId: uniqueId,\r\n  Evented: Evented,\r\n  getScrollBarSize: getScrollBarSize\r\n};\r\n/* globals TetherBase, performance */\r\n\r\n'use strict';\r\n\r\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\r\n\r\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\r\n\r\nif (typeof TetherBase === 'undefined') {\r\n  throw new Error('You must include the utils.js file before tether.js');\r\n}\r\n\r\nvar _TetherBase$Utils = TetherBase.Utils;\r\nvar getScrollParent = _TetherBase$Utils.getScrollParent;\r\nvar getBounds = _TetherBase$Utils.getBounds;\r\nvar getOffsetParent = _TetherBase$Utils.getOffsetParent;\r\nvar extend = _TetherBase$Utils.extend;\r\nvar addClass = _TetherBase$Utils.addClass;\r\nvar removeClass = _TetherBase$Utils.removeClass;\r\nvar updateClasses = _TetherBase$Utils.updateClasses;\r\nvar defer = _TetherBase$Utils.defer;\r\nvar flush = _TetherBase$Utils.flush;\r\nvar getScrollBarSize = _TetherBase$Utils.getScrollBarSize;\r\n\r\nfunction within(a, b) {\r\n  var diff = arguments.length <= 2 || arguments[2] === undefined ? 1 : arguments[2];\r\n\r\n  return a + diff >= b && b >= a - diff;\r\n}\r\n\r\nvar transformKey = (function () {\r\n  if (typeof document === 'undefined') {\r\n    return '';\r\n  }\r\n  var el = document.createElement('div');\r\n\r\n  var transforms = ['transform', 'webkitTransform', 'OTransform', 'MozTransform', 'msTransform'];\r\n  for (var i = 0; i < transforms.length; ++i) {\r\n    var key = transforms[i];\r\n    if (el.style[key] !== undefined) {\r\n      return key;\r\n    }\r\n  }\r\n})();\r\n\r\nvar tethers = [];\r\n\r\nvar position = function position() {\r\n  tethers.forEach(function (tether) {\r\n    tether.position(false);\r\n  });\r\n  flush();\r\n};\r\n\r\nfunction now() {\r\n  if (typeof performance !== 'undefined' && typeof performance.now !== 'undefined') {\r\n    return performance.now();\r\n  }\r\n  return +new Date();\r\n}\r\n\r\n(function () {\r\n  var lastCall = null;\r\n  var lastDuration = null;\r\n  var pendingTimeout = null;\r\n\r\n  var tick = function tick() {\r\n    if (typeof lastDuration !== 'undefined' && lastDuration > 16) {\r\n      // We voluntarily throttle ourselves if we can't manage 60fps\r\n      lastDuration = Math.min(lastDuration - 16, 250);\r\n\r\n      // Just in case this is the last event, remember to position just once more\r\n      pendingTimeout = setTimeout(tick, 250);\r\n      return;\r\n    }\r\n\r\n    if (typeof lastCall !== 'undefined' && now() - lastCall < 10) {\r\n      // Some browsers call events a little too frequently, refuse to run more than is reasonable\r\n      return;\r\n    }\r\n\r\n    if (typeof pendingTimeout !== 'undefined') {\r\n      clearTimeout(pendingTimeout);\r\n      pendingTimeout = null;\r\n    }\r\n\r\n    lastCall = now();\r\n    position();\r\n    lastDuration = now() - lastCall;\r\n  };\r\n\r\n  if (typeof window !== 'undefined') {\r\n    ['resize', 'scroll', 'touchmove'].forEach(function (event) {\r\n      window.addEventListener(event, tick);\r\n    });\r\n  }\r\n})();\r\n\r\nvar MIRROR_LR = {\r\n  center: 'center',\r\n  left: 'right',\r\n  right: 'left'\r\n};\r\n\r\nvar MIRROR_TB = {\r\n  middle: 'middle',\r\n  top: 'bottom',\r\n  bottom: 'top'\r\n};\r\n\r\nvar OFFSET_MAP = {\r\n  top: 0,\r\n  left: 0,\r\n  middle: '50%',\r\n  center: '50%',\r\n  bottom: '100%',\r\n  right: '100%'\r\n};\r\n\r\nvar autoToFixedAttachment = function autoToFixedAttachment(attachment, relativeToAttachment) {\r\n  var left = attachment.left;\r\n  var top = attachment.top;\r\n\r\n  if (left === 'auto') {\r\n    left = MIRROR_LR[relativeToAttachment.left];\r\n  }\r\n\r\n  if (top === 'auto') {\r\n    top = MIRROR_TB[relativeToAttachment.top];\r\n  }\r\n\r\n  return { left: left, top: top };\r\n};\r\n\r\nvar attachmentToOffset = function attachmentToOffset(attachment) {\r\n  var left = attachment.left;\r\n  var top = attachment.top;\r\n\r\n  if (typeof OFFSET_MAP[attachment.left] !== 'undefined') {\r\n    left = OFFSET_MAP[attachment.left];\r\n  }\r\n\r\n  if (typeof OFFSET_MAP[attachment.top] !== 'undefined') {\r\n    top = OFFSET_MAP[attachment.top];\r\n  }\r\n\r\n  return { left: left, top: top };\r\n};\r\n\r\nfunction addOffset() {\r\n  var out = { top: 0, left: 0 };\r\n\r\n  for (var _len = arguments.length, offsets = Array(_len), _key = 0; _key < _len; _key++) {\r\n    offsets[_key] = arguments[_key];\r\n  }\r\n\r\n  offsets.forEach(function (_ref) {\r\n    var top = _ref.top;\r\n    var left = _ref.left;\r\n\r\n    if (typeof top === 'string') {\r\n      top = parseFloat(top, 10);\r\n    }\r\n    if (typeof left === 'string') {\r\n      left = parseFloat(left, 10);\r\n    }\r\n\r\n    out.top += top;\r\n    out.left += left;\r\n  });\r\n\r\n  return out;\r\n}\r\n\r\nfunction offsetToPx(offset, size) {\r\n  if (typeof offset.left === 'string' && offset.left.indexOf('%') !== -1) {\r\n    offset.left = parseFloat(offset.left, 10) / 100 * size.width;\r\n  }\r\n  if (typeof offset.top === 'string' && offset.top.indexOf('%') !== -1) {\r\n    offset.top = parseFloat(offset.top, 10) / 100 * size.height;\r\n  }\r\n\r\n  return offset;\r\n}\r\n\r\nvar parseOffset = function parseOffset(value) {\r\n  var _value$split = value.split(' ');\r\n\r\n  var _value$split2 = _slicedToArray(_value$split, 2);\r\n\r\n  var top = _value$split2[0];\r\n  var left = _value$split2[1];\r\n\r\n  return { top: top, left: left };\r\n};\r\nvar parseAttachment = parseOffset;\r\n\r\nvar TetherClass = (function () {\r\n  function TetherClass(options) {\r\n    var _this = this;\r\n\r\n    _classCallCheck(this, TetherClass);\r\n\r\n    this.position = this.position.bind(this);\r\n\r\n    tethers.push(this);\r\n\r\n    this.history = [];\r\n\r\n    this.setOptions(options, false);\r\n\r\n    TetherBase.modules.forEach(function (module) {\r\n      if (typeof module.initialize !== 'undefined') {\r\n        module.initialize.call(_this);\r\n      }\r\n    });\r\n\r\n    this.position();\r\n  }\r\n\r\n  _createClass(TetherClass, [{\r\n    key: 'getClass',\r\n    value: function getClass() {\r\n      var key = arguments.length <= 0 || arguments[0] === undefined ? '' : arguments[0];\r\n      var classes = this.options.classes;\r\n\r\n      if (typeof classes !== 'undefined' && classes[key]) {\r\n        return this.options.classes[key];\r\n      } else if (this.options.classPrefix) {\r\n        return this.options.classPrefix + '-' + key;\r\n      } else {\r\n        return key;\r\n      }\r\n    }\r\n  }, {\r\n    key: 'setOptions',\r\n    value: function setOptions(options) {\r\n      var _this2 = this;\r\n\r\n      var pos = arguments.length <= 1 || arguments[1] === undefined ? true : arguments[1];\r\n\r\n      var defaults = {\r\n        offset: '0 0',\r\n        targetOffset: '0 0',\r\n        targetAttachment: 'auto auto',\r\n        classPrefix: 'tether'\r\n      };\r\n\r\n      this.options = extend(defaults, options);\r\n\r\n      var _options = this.options;\r\n      var element = _options.element;\r\n      var target = _options.target;\r\n      var targetModifier = _options.targetModifier;\r\n\r\n      this.element = element;\r\n      this.target = target;\r\n      this.targetModifier = targetModifier;\r\n\r\n      if (this.target === 'viewport') {\r\n        this.target = document.body;\r\n        this.targetModifier = 'visible';\r\n      } else if (this.target === 'scroll-handle') {\r\n        this.target = document.body;\r\n        this.targetModifier = 'scroll-handle';\r\n      }\r\n\r\n      ['element', 'target'].forEach(function (key) {\r\n        if (typeof _this2[key] === 'undefined') {\r\n          throw new Error('Tether Error: Both element and target must be defined');\r\n        }\r\n\r\n        if (typeof _this2[key].jquery !== 'undefined') {\r\n          _this2[key] = _this2[key][0];\r\n        } else if (typeof _this2[key] === 'string') {\r\n          _this2[key] = document.querySelector(_this2[key]);\r\n        }\r\n      });\r\n\r\n      addClass(this.element, this.getClass('element'));\r\n      if (!(this.options.addTargetClasses === false)) {\r\n        addClass(this.target, this.getClass('target'));\r\n      }\r\n\r\n      if (!this.options.attachment) {\r\n        throw new Error('Tether Error: You must provide an attachment');\r\n      }\r\n\r\n      this.targetAttachment = parseAttachment(this.options.targetAttachment);\r\n      this.attachment = parseAttachment(this.options.attachment);\r\n      this.offset = parseOffset(this.options.offset);\r\n      this.targetOffset = parseOffset(this.options.targetOffset);\r\n\r\n      if (typeof this.scrollParent !== 'undefined') {\r\n        this.disable();\r\n      }\r\n\r\n      if (this.targetModifier === 'scroll-handle') {\r\n        this.scrollParent = this.target;\r\n      } else {\r\n        this.scrollParent = getScrollParent(this.target);\r\n      }\r\n\r\n      if (!(this.options.enabled === false)) {\r\n        this.enable(pos);\r\n      }\r\n    }\r\n  }, {\r\n    key: 'getTargetBounds',\r\n    value: function getTargetBounds() {\r\n      if (typeof this.targetModifier !== 'undefined') {\r\n        if (this.targetModifier === 'visible') {\r\n          if (this.target === document.body) {\r\n            return { top: pageYOffset, left: pageXOffset, height: innerHeight, width: innerWidth };\r\n          } else {\r\n            var bounds = getBounds(this.target);\r\n\r\n            var out = {\r\n              height: bounds.height,\r\n              width: bounds.width,\r\n              top: bounds.top,\r\n              left: bounds.left\r\n            };\r\n\r\n            out.height = Math.min(out.height, bounds.height - (pageYOffset - bounds.top));\r\n            out.height = Math.min(out.height, bounds.height - (bounds.top + bounds.height - (pageYOffset + innerHeight)));\r\n            out.height = Math.min(innerHeight, out.height);\r\n            out.height -= 2;\r\n\r\n            out.width = Math.min(out.width, bounds.width - (pageXOffset - bounds.left));\r\n            out.width = Math.min(out.width, bounds.width - (bounds.left + bounds.width - (pageXOffset + innerWidth)));\r\n            out.width = Math.min(innerWidth, out.width);\r\n            out.width -= 2;\r\n\r\n            if (out.top < pageYOffset) {\r\n              out.top = pageYOffset;\r\n            }\r\n            if (out.left < pageXOffset) {\r\n              out.left = pageXOffset;\r\n            }\r\n\r\n            return out;\r\n          }\r\n        } else if (this.targetModifier === 'scroll-handle') {\r\n          var bounds = undefined;\r\n          var target = this.target;\r\n          if (target === document.body) {\r\n            target = document.documentElement;\r\n\r\n            bounds = {\r\n              left: pageXOffset,\r\n              top: pageYOffset,\r\n              height: innerHeight,\r\n              width: innerWidth\r\n            };\r\n          } else {\r\n            bounds = getBounds(target);\r\n          }\r\n\r\n          var style = getComputedStyle(target);\r\n\r\n          var hasBottomScroll = target.scrollWidth > target.clientWidth || [style.overflow, style.overflowX].indexOf('scroll') >= 0 || this.target !== document.body;\r\n\r\n          var scrollBottom = 0;\r\n          if (hasBottomScroll) {\r\n            scrollBottom = 15;\r\n          }\r\n\r\n          var height = bounds.height - parseFloat(style.borderTopWidth) - parseFloat(style.borderBottomWidth) - scrollBottom;\r\n\r\n          var out = {\r\n            width: 15,\r\n            height: height * 0.975 * (height / target.scrollHeight),\r\n            left: bounds.left + bounds.width - parseFloat(style.borderLeftWidth) - 15\r\n          };\r\n\r\n          var fitAdj = 0;\r\n          if (height < 408 && this.target === document.body) {\r\n            fitAdj = -0.00011 * Math.pow(height, 2) - 0.00727 * height + 22.58;\r\n          }\r\n\r\n          if (this.target !== document.body) {\r\n            out.height = Math.max(out.height, 24);\r\n          }\r\n\r\n          var scrollPercentage = this.target.scrollTop / (target.scrollHeight - height);\r\n          out.top = scrollPercentage * (height - out.height - fitAdj) + bounds.top + parseFloat(style.borderTopWidth);\r\n\r\n          if (this.target === document.body) {\r\n            out.height = Math.max(out.height, 24);\r\n          }\r\n\r\n          return out;\r\n        }\r\n      } else {\r\n        return getBounds(this.target);\r\n      }\r\n    }\r\n  }, {\r\n    key: 'clearCache',\r\n    value: function clearCache() {\r\n      this._cache = {};\r\n    }\r\n  }, {\r\n    key: 'cache',\r\n    value: function cache(k, getter) {\r\n      // More than one module will often need the same DOM info, so\r\n      // we keep a cache which is cleared on each position call\r\n      if (typeof this._cache === 'undefined') {\r\n        this._cache = {};\r\n      }\r\n\r\n      if (typeof this._cache[k] === 'undefined') {\r\n        this._cache[k] = getter.call(this);\r\n      }\r\n\r\n      return this._cache[k];\r\n    }\r\n  }, {\r\n    key: 'enable',\r\n    value: function enable() {\r\n      var pos = arguments.length <= 0 || arguments[0] === undefined ? true : arguments[0];\r\n\r\n      if (!(this.options.addTargetClasses === false)) {\r\n        addClass(this.target, this.getClass('enabled'));\r\n      }\r\n      addClass(this.element, this.getClass('enabled'));\r\n      this.enabled = true;\r\n\r\n      if (this.scrollParent !== document) {\r\n        this.scrollParent.addEventListener('scroll', this.position);\r\n      }\r\n\r\n      if (pos) {\r\n        this.position();\r\n      }\r\n    }\r\n  }, {\r\n    key: 'disable',\r\n    value: function disable() {\r\n      removeClass(this.target, this.getClass('enabled'));\r\n      removeClass(this.element, this.getClass('enabled'));\r\n      this.enabled = false;\r\n\r\n      if (typeof this.scrollParent !== 'undefined') {\r\n        this.scrollParent.removeEventListener('scroll', this.position);\r\n      }\r\n    }\r\n  }, {\r\n    key: 'destroy',\r\n    value: function destroy() {\r\n      var _this3 = this;\r\n\r\n      this.disable();\r\n\r\n      tethers.forEach(function (tether, i) {\r\n        if (tether === _this3) {\r\n          tethers.splice(i, 1);\r\n          return;\r\n        }\r\n      });\r\n    }\r\n  }, {\r\n    key: 'updateAttachClasses',\r\n    value: function updateAttachClasses(elementAttach, targetAttach) {\r\n      var _this4 = this;\r\n\r\n      elementAttach = elementAttach || this.attachment;\r\n      targetAttach = targetAttach || this.targetAttachment;\r\n      var sides = ['left', 'top', 'bottom', 'right', 'middle', 'center'];\r\n\r\n      if (typeof this._addAttachClasses !== 'undefined' && this._addAttachClasses.length) {\r\n        // updateAttachClasses can be called more than once in a position call, so\r\n        // we need to clean up after ourselves such that when the last defer gets\r\n        // ran it doesn't add any extra classes from previous calls.\r\n        this._addAttachClasses.splice(0, this._addAttachClasses.length);\r\n      }\r\n\r\n      if (typeof this._addAttachClasses === 'undefined') {\r\n        this._addAttachClasses = [];\r\n      }\r\n      var add = this._addAttachClasses;\r\n\r\n      if (elementAttach.top) {\r\n        add.push(this.getClass('element-attached') + '-' + elementAttach.top);\r\n      }\r\n      if (elementAttach.left) {\r\n        add.push(this.getClass('element-attached') + '-' + elementAttach.left);\r\n      }\r\n      if (targetAttach.top) {\r\n        add.push(this.getClass('target-attached') + '-' + targetAttach.top);\r\n      }\r\n      if (targetAttach.left) {\r\n        add.push(this.getClass('target-attached') + '-' + targetAttach.left);\r\n      }\r\n\r\n      var all = [];\r\n      sides.forEach(function (side) {\r\n        all.push(_this4.getClass('element-attached') + '-' + side);\r\n        all.push(_this4.getClass('target-attached') + '-' + side);\r\n      });\r\n\r\n      defer(function () {\r\n        if (!(typeof _this4._addAttachClasses !== 'undefined')) {\r\n          return;\r\n        }\r\n\r\n        updateClasses(_this4.element, _this4._addAttachClasses, all);\r\n        if (!(_this4.options.addTargetClasses === false)) {\r\n          updateClasses(_this4.target, _this4._addAttachClasses, all);\r\n        }\r\n\r\n        delete _this4._addAttachClasses;\r\n      });\r\n    }\r\n  }, {\r\n    key: 'position',\r\n    value: function position() {\r\n      var _this5 = this;\r\n\r\n      var flushChanges = arguments.length <= 0 || arguments[0] === undefined ? true : arguments[0];\r\n\r\n      // flushChanges commits the changes immediately, leave true unless you are positioning multiple\r\n      // tethers (in which case call Tether.Utils.flush yourself when you're done)\r\n\r\n      if (!this.enabled) {\r\n        return;\r\n      }\r\n\r\n      this.clearCache();\r\n\r\n      // Turn 'auto' attachments into the appropriate corner or edge\r\n      var targetAttachment = autoToFixedAttachment(this.targetAttachment, this.attachment);\r\n\r\n      this.updateAttachClasses(this.attachment, targetAttachment);\r\n\r\n      var elementPos = this.cache('element-bounds', function () {\r\n        return getBounds(_this5.element);\r\n      });\r\n\r\n      var width = elementPos.width;\r\n      var height = elementPos.height;\r\n\r\n      if (width === 0 && height === 0 && typeof this.lastSize !== 'undefined') {\r\n        var _lastSize = this.lastSize;\r\n\r\n        // We cache the height and width to make it possible to position elements that are\r\n        // getting hidden.\r\n        width = _lastSize.width;\r\n        height = _lastSize.height;\r\n      } else {\r\n        this.lastSize = { width: width, height: height };\r\n      }\r\n\r\n      var targetPos = this.cache('target-bounds', function () {\r\n        return _this5.getTargetBounds();\r\n      });\r\n      var targetSize = targetPos;\r\n\r\n      // Get an actual px offset from the attachment\r\n      var offset = offsetToPx(attachmentToOffset(this.attachment), { width: width, height: height });\r\n      var targetOffset = offsetToPx(attachmentToOffset(targetAttachment), targetSize);\r\n\r\n      var manualOffset = offsetToPx(this.offset, { width: width, height: height });\r\n      var manualTargetOffset = offsetToPx(this.targetOffset, targetSize);\r\n\r\n      // Add the manually provided offset\r\n      offset = addOffset(offset, manualOffset);\r\n      targetOffset = addOffset(targetOffset, manualTargetOffset);\r\n\r\n      // It's now our goal to make (element position + offset) == (target position + target offset)\r\n      var left = targetPos.left + targetOffset.left - offset.left;\r\n      var top = targetPos.top + targetOffset.top - offset.top;\r\n\r\n      for (var i = 0; i < TetherBase.modules.length; ++i) {\r\n        var _module2 = TetherBase.modules[i];\r\n        var ret = _module2.position.call(this, {\r\n          left: left,\r\n          top: top,\r\n          targetAttachment: targetAttachment,\r\n          targetPos: targetPos,\r\n          elementPos: elementPos,\r\n          offset: offset,\r\n          targetOffset: targetOffset,\r\n          manualOffset: manualOffset,\r\n          manualTargetOffset: manualTargetOffset,\r\n          scrollbarSize: scrollbarSize,\r\n          attachment: this.attachment\r\n        });\r\n\r\n        if (ret === false) {\r\n          return false;\r\n        } else if (typeof ret === 'undefined' || typeof ret !== 'object') {\r\n          continue;\r\n        } else {\r\n          top = ret.top;\r\n          left = ret.left;\r\n        }\r\n      }\r\n\r\n      // We describe the position three different ways to give the optimizer\r\n      // a chance to decide the best possible way to position the element\r\n      // with the fewest repaints.\r\n      var next = {\r\n        // It's position relative to the page (absolute positioning when\r\n        // the element is a child of the body)\r\n        page: {\r\n          top: top,\r\n          left: left\r\n        },\r\n\r\n        // It's position relative to the viewport (fixed positioning)\r\n        viewport: {\r\n          top: top - pageYOffset,\r\n          bottom: pageYOffset - top - height + innerHeight,\r\n          left: left - pageXOffset,\r\n          right: pageXOffset - left - width + innerWidth\r\n        }\r\n      };\r\n\r\n      var scrollbarSize = undefined;\r\n      if (document.body.scrollWidth > window.innerWidth) {\r\n        scrollbarSize = this.cache('scrollbar-size', getScrollBarSize);\r\n        next.viewport.bottom -= scrollbarSize.height;\r\n      }\r\n\r\n      if (document.body.scrollHeight > window.innerHeight) {\r\n        scrollbarSize = this.cache('scrollbar-size', getScrollBarSize);\r\n        next.viewport.right -= scrollbarSize.width;\r\n      }\r\n\r\n      if (['', 'static'].indexOf(document.body.style.position) === -1 || ['', 'static'].indexOf(document.body.parentElement.style.position) === -1) {\r\n        // Absolute positioning in the body will be relative to the page, not the 'initial containing block'\r\n        next.page.bottom = document.body.scrollHeight - top - height;\r\n        next.page.right = document.body.scrollWidth - left - width;\r\n      }\r\n\r\n      if (typeof this.options.optimizations !== 'undefined' && this.options.optimizations.moveElement !== false && !(typeof this.targetModifier !== 'undefined')) {\r\n        (function () {\r\n          var offsetParent = _this5.cache('target-offsetparent', function () {\r\n            return getOffsetParent(_this5.target);\r\n          });\r\n          var offsetPosition = _this5.cache('target-offsetparent-bounds', function () {\r\n            return getBounds(offsetParent);\r\n          });\r\n          var offsetParentStyle = getComputedStyle(offsetParent);\r\n          var offsetParentSize = offsetPosition;\r\n\r\n          var offsetBorder = {};\r\n          ['Top', 'Left', 'Bottom', 'Right'].forEach(function (side) {\r\n            offsetBorder[side.toLowerCase()] = parseFloat(offsetParentStyle['border' + side + 'Width']);\r\n          });\r\n\r\n          offsetPosition.right = document.body.scrollWidth - offsetPosition.left - offsetParentSize.width + offsetBorder.right;\r\n          offsetPosition.bottom = document.body.scrollHeight - offsetPosition.top - offsetParentSize.height + offsetBorder.bottom;\r\n\r\n          if (next.page.top >= offsetPosition.top + offsetBorder.top && next.page.bottom >= offsetPosition.bottom) {\r\n            if (next.page.left >= offsetPosition.left + offsetBorder.left && next.page.right >= offsetPosition.right) {\r\n              // We're within the visible part of the target's scroll parent\r\n              var scrollTop = offsetParent.scrollTop;\r\n              var scrollLeft = offsetParent.scrollLeft;\r\n\r\n              // It's position relative to the target's offset parent (absolute positioning when\r\n              // the element is moved to be a child of the target's offset parent).\r\n              next.offset = {\r\n                top: next.page.top - offsetPosition.top + scrollTop - offsetBorder.top,\r\n                left: next.page.left - offsetPosition.left + scrollLeft - offsetBorder.left\r\n              };\r\n            }\r\n          }\r\n        })();\r\n      }\r\n\r\n      // We could also travel up the DOM and try each containing context, rather than only\r\n      // looking at the body, but we're gonna get diminishing returns.\r\n\r\n      this.move(next);\r\n\r\n      this.history.unshift(next);\r\n\r\n      if (this.history.length > 3) {\r\n        this.history.pop();\r\n      }\r\n\r\n      if (flushChanges) {\r\n        flush();\r\n      }\r\n\r\n      return true;\r\n    }\r\n\r\n    // THE ISSUE\r\n  }, {\r\n    key: 'move',\r\n    value: function move(pos) {\r\n      var _this6 = this;\r\n\r\n      if (!(typeof this.element.parentNode !== 'undefined')) {\r\n        return;\r\n      }\r\n\r\n      var same = {};\r\n\r\n      for (var type in pos) {\r\n        same[type] = {};\r\n\r\n        for (var key in pos[type]) {\r\n          var found = false;\r\n\r\n          for (var i = 0; i < this.history.length; ++i) {\r\n            var point = this.history[i];\r\n            if (typeof point[type] !== 'undefined' && !within(point[type][key], pos[type][key])) {\r\n              found = true;\r\n              break;\r\n            }\r\n          }\r\n\r\n          if (!found) {\r\n            same[type][key] = true;\r\n          }\r\n        }\r\n      }\r\n\r\n      var css = { top: '', left: '', right: '', bottom: '' };\r\n\r\n      var transcribe = function transcribe(_same, _pos) {\r\n        var hasOptimizations = typeof _this6.options.optimizations !== 'undefined';\r\n        var gpu = hasOptimizations ? _this6.options.optimizations.gpu : null;\r\n        if (gpu !== false) {\r\n          var yPos = undefined,\r\n              xPos = undefined;\r\n          if (_same.top) {\r\n            css.top = 0;\r\n            yPos = _pos.top;\r\n          } else {\r\n            css.bottom = 0;\r\n            yPos = -_pos.bottom;\r\n          }\r\n\r\n          if (_same.left) {\r\n            css.left = 0;\r\n            xPos = _pos.left;\r\n          } else {\r\n            css.right = 0;\r\n            xPos = -_pos.right;\r\n          }\r\n\r\n          css[transformKey] = 'translateX(' + Math.round(xPos) + 'px) translateY(' + Math.round(yPos) + 'px)';\r\n\r\n          if (transformKey !== 'msTransform') {\r\n            // The Z transform will keep this in the GPU (faster, and prevents artifacts),\r\n            // but IE9 doesn't support 3d transforms and will choke.\r\n            css[transformKey] += \" translateZ(0)\";\r\n          }\r\n        } else {\r\n          if (_same.top) {\r\n            css.top = _pos.top + 'px';\r\n          } else {\r\n            css.bottom = _pos.bottom + 'px';\r\n          }\r\n\r\n          if (_same.left) {\r\n            css.left = _pos.left + 'px';\r\n          } else {\r\n            css.right = _pos.right + 'px';\r\n          }\r\n        }\r\n      };\r\n\r\n      var moved = false;\r\n      if ((same.page.top || same.page.bottom) && (same.page.left || same.page.right)) {\r\n        css.position = 'absolute';\r\n        transcribe(same.page, pos.page);\r\n      } else if ((same.viewport.top || same.viewport.bottom) && (same.viewport.left || same.viewport.right)) {\r\n        css.position = 'fixed';\r\n        transcribe(same.viewport, pos.viewport);\r\n      } else if (typeof same.offset !== 'undefined' && same.offset.top && same.offset.left) {\r\n        (function () {\r\n          css.position = 'absolute';\r\n          var offsetParent = _this6.cache('target-offsetparent', function () {\r\n            return getOffsetParent(_this6.target);\r\n          });\r\n\r\n          if (getOffsetParent(_this6.element) !== offsetParent) {\r\n            defer(function () {\r\n              _this6.element.parentNode.removeChild(_this6.element);\r\n              offsetParent.appendChild(_this6.element);\r\n            });\r\n          }\r\n\r\n          transcribe(same.offset, pos.offset);\r\n          moved = true;\r\n        })();\r\n      } else {\r\n        css.position = 'absolute';\r\n        transcribe({ top: true, left: true }, pos.page);\r\n      }\r\n\r\n      if (!moved) {\r\n        var offsetParentIsBody = true;\r\n        var currentNode = this.element.parentNode;\r\n        while (currentNode && currentNode.tagName !== 'BODY') {\r\n          if (getComputedStyle(currentNode).position !== 'static') {\r\n            offsetParentIsBody = false;\r\n            break;\r\n          }\r\n\r\n          currentNode = currentNode.parentNode;\r\n        }\r\n\r\n        if (!offsetParentIsBody) {\r\n          this.element.parentNode.removeChild(this.element);\r\n          document.body.appendChild(this.element);\r\n        }\r\n      }\r\n\r\n      // Any css change will trigger a repaint, so let's avoid one if nothing changed\r\n      var writeCSS = {};\r\n      var write = false;\r\n      for (var key in css) {\r\n        var val = css[key];\r\n        var elVal = this.element.style[key];\r\n\r\n        if (elVal !== '' && val !== '' && ['top', 'left', 'bottom', 'right'].indexOf(key) >= 0) {\r\n          elVal = parseFloat(elVal);\r\n          val = parseFloat(val);\r\n        }\r\n\r\n        if (elVal !== val) {\r\n          write = true;\r\n          writeCSS[key] = val;\r\n        }\r\n      }\r\n\r\n      if (write) {\r\n        defer(function () {\r\n          extend(_this6.element.style, writeCSS);\r\n        });\r\n      }\r\n    }\r\n  }]);\r\n\r\n  return TetherClass;\r\n})();\r\n\r\nTetherClass.modules = [];\r\n\r\nTetherBase.position = position;\r\n\r\nvar Tether = extend(TetherClass, TetherBase);\r\n/* globals TetherBase */\r\n\r\n'use strict';\r\n\r\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\r\n\r\nvar _TetherBase$Utils = TetherBase.Utils;\r\nvar getBounds = _TetherBase$Utils.getBounds;\r\nvar extend = _TetherBase$Utils.extend;\r\nvar updateClasses = _TetherBase$Utils.updateClasses;\r\nvar defer = _TetherBase$Utils.defer;\r\n\r\nvar BOUNDS_FORMAT = ['left', 'top', 'right', 'bottom'];\r\n\r\nfunction getBoundingRect(tether, to) {\r\n  if (to === 'scrollParent') {\r\n    to = tether.scrollParent;\r\n  } else if (to === 'window') {\r\n    to = [pageXOffset, pageYOffset, innerWidth + pageXOffset, innerHeight + pageYOffset];\r\n  }\r\n\r\n  if (to === document) {\r\n    to = to.documentElement;\r\n  }\r\n\r\n  if (typeof to.nodeType !== 'undefined') {\r\n    (function () {\r\n      var size = getBounds(to);\r\n      var pos = size;\r\n      var style = getComputedStyle(to);\r\n\r\n      to = [pos.left, pos.top, size.width + pos.left, size.height + pos.top];\r\n\r\n      BOUNDS_FORMAT.forEach(function (side, i) {\r\n        side = side[0].toUpperCase() + side.substr(1);\r\n        if (side === 'Top' || side === 'Left') {\r\n          to[i] += parseFloat(style['border' + side + 'Width']);\r\n        } else {\r\n          to[i] -= parseFloat(style['border' + side + 'Width']);\r\n        }\r\n      });\r\n    })();\r\n  }\r\n\r\n  return to;\r\n}\r\n\r\nTetherBase.modules.push({\r\n  position: function position(_ref) {\r\n    var _this = this;\r\n\r\n    var top = _ref.top;\r\n    var left = _ref.left;\r\n    var targetAttachment = _ref.targetAttachment;\r\n\r\n    if (!this.options.constraints) {\r\n      return true;\r\n    }\r\n\r\n    var _cache = this.cache('element-bounds', function () {\r\n      return getBounds(_this.element);\r\n    });\r\n\r\n    var height = _cache.height;\r\n    var width = _cache.width;\r\n\r\n    if (width === 0 && height === 0 && typeof this.lastSize !== 'undefined') {\r\n      var _lastSize = this.lastSize;\r\n\r\n      // Handle the item getting hidden as a result of our positioning without glitching\r\n      // the classes in and out\r\n      width = _lastSize.width;\r\n      height = _lastSize.height;\r\n    }\r\n\r\n    var targetSize = this.cache('target-bounds', function () {\r\n      return _this.getTargetBounds();\r\n    });\r\n\r\n    var targetHeight = targetSize.height;\r\n    var targetWidth = targetSize.width;\r\n\r\n    var allClasses = [this.getClass('pinned'), this.getClass('out-of-bounds')];\r\n\r\n    this.options.constraints.forEach(function (constraint) {\r\n      var outOfBoundsClass = constraint.outOfBoundsClass;\r\n      var pinnedClass = constraint.pinnedClass;\r\n\r\n      if (outOfBoundsClass) {\r\n        allClasses.push(outOfBoundsClass);\r\n      }\r\n      if (pinnedClass) {\r\n        allClasses.push(pinnedClass);\r\n      }\r\n    });\r\n\r\n    allClasses.forEach(function (cls) {\r\n      ['left', 'top', 'right', 'bottom'].forEach(function (side) {\r\n        allClasses.push(cls + '-' + side);\r\n      });\r\n    });\r\n\r\n    var addClasses = [];\r\n\r\n    var tAttachment = extend({}, targetAttachment);\r\n    var eAttachment = extend({}, this.attachment);\r\n\r\n    this.options.constraints.forEach(function (constraint) {\r\n      var to = constraint.to;\r\n      var attachment = constraint.attachment;\r\n      var pin = constraint.pin;\r\n\r\n      if (typeof attachment === 'undefined') {\r\n        attachment = '';\r\n      }\r\n\r\n      var changeAttachX = undefined,\r\n          changeAttachY = undefined;\r\n      if (attachment.indexOf(' ') >= 0) {\r\n        var _attachment$split = attachment.split(' ');\r\n\r\n        var _attachment$split2 = _slicedToArray(_attachment$split, 2);\r\n\r\n        changeAttachY = _attachment$split2[0];\r\n        changeAttachX = _attachment$split2[1];\r\n      } else {\r\n        changeAttachX = changeAttachY = attachment;\r\n      }\r\n\r\n      var bounds = getBoundingRect(_this, to);\r\n\r\n      if (changeAttachY === 'target' || changeAttachY === 'both') {\r\n        if (top < bounds[1] && tAttachment.top === 'top') {\r\n          top += targetHeight;\r\n          tAttachment.top = 'bottom';\r\n        }\r\n\r\n        if (top + height > bounds[3] && tAttachment.top === 'bottom') {\r\n          top -= targetHeight;\r\n          tAttachment.top = 'top';\r\n        }\r\n      }\r\n\r\n      if (changeAttachY === 'together') {\r\n        if (top < bounds[1] && tAttachment.top === 'top') {\r\n          if (eAttachment.top === 'bottom') {\r\n            top += targetHeight;\r\n            tAttachment.top = 'bottom';\r\n\r\n            top += height;\r\n            eAttachment.top = 'top';\r\n          } else if (eAttachment.top === 'top') {\r\n            top += targetHeight;\r\n            tAttachment.top = 'bottom';\r\n\r\n            top -= height;\r\n            eAttachment.top = 'bottom';\r\n          }\r\n        }\r\n\r\n        if (top + height > bounds[3] && tAttachment.top === 'bottom') {\r\n          if (eAttachment.top === 'top') {\r\n            top -= targetHeight;\r\n            tAttachment.top = 'top';\r\n\r\n            top -= height;\r\n            eAttachment.top = 'bottom';\r\n          } else if (eAttachment.top === 'bottom') {\r\n            top -= targetHeight;\r\n            tAttachment.top = 'top';\r\n\r\n            top += height;\r\n            eAttachment.top = 'top';\r\n          }\r\n        }\r\n\r\n        if (tAttachment.top === 'middle') {\r\n          if (top + height > bounds[3] && eAttachment.top === 'top') {\r\n            top -= height;\r\n            eAttachment.top = 'bottom';\r\n          } else if (top < bounds[1] && eAttachment.top === 'bottom') {\r\n            top += height;\r\n            eAttachment.top = 'top';\r\n          }\r\n        }\r\n      }\r\n\r\n      if (changeAttachX === 'target' || changeAttachX === 'both') {\r\n        if (left < bounds[0] && tAttachment.left === 'left') {\r\n          left += targetWidth;\r\n          tAttachment.left = 'right';\r\n        }\r\n\r\n        if (left + width > bounds[2] && tAttachment.left === 'right') {\r\n          left -= targetWidth;\r\n          tAttachment.left = 'left';\r\n        }\r\n      }\r\n\r\n      if (changeAttachX === 'together') {\r\n        if (left < bounds[0] && tAttachment.left === 'left') {\r\n          if (eAttachment.left === 'right') {\r\n            left += targetWidth;\r\n            tAttachment.left = 'right';\r\n\r\n            left += width;\r\n            eAttachment.left = 'left';\r\n          } else if (eAttachment.left === 'left') {\r\n            left += targetWidth;\r\n            tAttachment.left = 'right';\r\n\r\n            left -= width;\r\n            eAttachment.left = 'right';\r\n          }\r\n        } else if (left + width > bounds[2] && tAttachment.left === 'right') {\r\n          if (eAttachment.left === 'left') {\r\n            left -= targetWidth;\r\n            tAttachment.left = 'left';\r\n\r\n            left -= width;\r\n            eAttachment.left = 'right';\r\n          } else if (eAttachment.left === 'right') {\r\n            left -= targetWidth;\r\n            tAttachment.left = 'left';\r\n\r\n            left += width;\r\n            eAttachment.left = 'left';\r\n          }\r\n        } else if (tAttachment.left === 'center') {\r\n          if (left + width > bounds[2] && eAttachment.left === 'left') {\r\n            left -= width;\r\n            eAttachment.left = 'right';\r\n          } else if (left < bounds[0] && eAttachment.left === 'right') {\r\n            left += width;\r\n            eAttachment.left = 'left';\r\n          }\r\n        }\r\n      }\r\n\r\n      if (changeAttachY === 'element' || changeAttachY === 'both') {\r\n        if (top < bounds[1] && eAttachment.top === 'bottom') {\r\n          top += height;\r\n          eAttachment.top = 'top';\r\n        }\r\n\r\n        if (top + height > bounds[3] && eAttachment.top === 'top') {\r\n          top -= height;\r\n          eAttachment.top = 'bottom';\r\n        }\r\n      }\r\n\r\n      if (changeAttachX === 'element' || changeAttachX === 'both') {\r\n        if (left < bounds[0]) {\r\n          if (eAttachment.left === 'right') {\r\n            left += width;\r\n            eAttachment.left = 'left';\r\n          } else if (eAttachment.left === 'center') {\r\n            left += width / 2;\r\n            eAttachment.left = 'left';\r\n          }\r\n        }\r\n\r\n        if (left + width > bounds[2]) {\r\n          if (eAttachment.left === 'left') {\r\n            left -= width;\r\n            eAttachment.left = 'right';\r\n          } else if (eAttachment.left === 'center') {\r\n            left -= width / 2;\r\n            eAttachment.left = 'right';\r\n          }\r\n        }\r\n      }\r\n\r\n      if (typeof pin === 'string') {\r\n        pin = pin.split(',').map(function (p) {\r\n          return p.trim();\r\n        });\r\n      } else if (pin === true) {\r\n        pin = ['top', 'left', 'right', 'bottom'];\r\n      }\r\n\r\n      pin = pin || [];\r\n\r\n      var pinned = [];\r\n      var oob = [];\r\n\r\n      if (top < bounds[1]) {\r\n        if (pin.indexOf('top') >= 0) {\r\n          top = bounds[1];\r\n          pinned.push('top');\r\n        } else {\r\n          oob.push('top');\r\n        }\r\n      }\r\n\r\n      if (top + height > bounds[3]) {\r\n        if (pin.indexOf('bottom') >= 0) {\r\n          top = bounds[3] - height;\r\n          pinned.push('bottom');\r\n        } else {\r\n          oob.push('bottom');\r\n        }\r\n      }\r\n\r\n      if (left < bounds[0]) {\r\n        if (pin.indexOf('left') >= 0) {\r\n          left = bounds[0];\r\n          pinned.push('left');\r\n        } else {\r\n          oob.push('left');\r\n        }\r\n      }\r\n\r\n      if (left + width > bounds[2]) {\r\n        if (pin.indexOf('right') >= 0) {\r\n          left = bounds[2] - width;\r\n          pinned.push('right');\r\n        } else {\r\n          oob.push('right');\r\n        }\r\n      }\r\n\r\n      if (pinned.length) {\r\n        (function () {\r\n          var pinnedClass = undefined;\r\n          if (typeof _this.options.pinnedClass !== 'undefined') {\r\n            pinnedClass = _this.options.pinnedClass;\r\n          } else {\r\n            pinnedClass = _this.getClass('pinned');\r\n          }\r\n\r\n          addClasses.push(pinnedClass);\r\n          pinned.forEach(function (side) {\r\n            addClasses.push(pinnedClass + '-' + side);\r\n          });\r\n        })();\r\n      }\r\n\r\n      if (oob.length) {\r\n        (function () {\r\n          var oobClass = undefined;\r\n          if (typeof _this.options.outOfBoundsClass !== 'undefined') {\r\n            oobClass = _this.options.outOfBoundsClass;\r\n          } else {\r\n            oobClass = _this.getClass('out-of-bounds');\r\n          }\r\n\r\n          addClasses.push(oobClass);\r\n          oob.forEach(function (side) {\r\n            addClasses.push(oobClass + '-' + side);\r\n          });\r\n        })();\r\n      }\r\n\r\n      if (pinned.indexOf('left') >= 0 || pinned.indexOf('right') >= 0) {\r\n        eAttachment.left = tAttachment.left = false;\r\n      }\r\n      if (pinned.indexOf('top') >= 0 || pinned.indexOf('bottom') >= 0) {\r\n        eAttachment.top = tAttachment.top = false;\r\n      }\r\n\r\n      if (tAttachment.top !== targetAttachment.top || tAttachment.left !== targetAttachment.left || eAttachment.top !== _this.attachment.top || eAttachment.left !== _this.attachment.left) {\r\n        _this.updateAttachClasses(eAttachment, tAttachment);\r\n      }\r\n    });\r\n\r\n    defer(function () {\r\n      if (!(_this.options.addTargetClasses === false)) {\r\n        updateClasses(_this.target, addClasses, allClasses);\r\n      }\r\n      updateClasses(_this.element, addClasses, allClasses);\r\n    });\r\n\r\n    return { top: top, left: left };\r\n  }\r\n});\r\n/* globals TetherBase */\r\n\r\n'use strict';\r\n\r\nvar _TetherBase$Utils = TetherBase.Utils;\r\nvar getBounds = _TetherBase$Utils.getBounds;\r\nvar updateClasses = _TetherBase$Utils.updateClasses;\r\nvar defer = _TetherBase$Utils.defer;\r\n\r\nTetherBase.modules.push({\r\n  position: function position(_ref) {\r\n    var _this = this;\r\n\r\n    var top = _ref.top;\r\n    var left = _ref.left;\r\n\r\n    var _cache = this.cache('element-bounds', function () {\r\n      return getBounds(_this.element);\r\n    });\r\n\r\n    var height = _cache.height;\r\n    var width = _cache.width;\r\n\r\n    var targetPos = this.getTargetBounds();\r\n\r\n    var bottom = top + height;\r\n    var right = left + width;\r\n\r\n    var abutted = [];\r\n    if (top <= targetPos.bottom && bottom >= targetPos.top) {\r\n      ['left', 'right'].forEach(function (side) {\r\n        var targetPosSide = targetPos[side];\r\n        if (targetPosSide === left || targetPosSide === right) {\r\n          abutted.push(side);\r\n        }\r\n      });\r\n    }\r\n\r\n    if (left <= targetPos.right && right >= targetPos.left) {\r\n      ['top', 'bottom'].forEach(function (side) {\r\n        var targetPosSide = targetPos[side];\r\n        if (targetPosSide === top || targetPosSide === bottom) {\r\n          abutted.push(side);\r\n        }\r\n      });\r\n    }\r\n\r\n    var allClasses = [];\r\n    var addClasses = [];\r\n\r\n    var sides = ['left', 'top', 'right', 'bottom'];\r\n    allClasses.push(this.getClass('abutted'));\r\n    sides.forEach(function (side) {\r\n      allClasses.push(_this.getClass('abutted') + '-' + side);\r\n    });\r\n\r\n    if (abutted.length) {\r\n      addClasses.push(this.getClass('abutted'));\r\n    }\r\n\r\n    abutted.forEach(function (side) {\r\n      addClasses.push(_this.getClass('abutted') + '-' + side);\r\n    });\r\n\r\n    defer(function () {\r\n      if (!(_this.options.addTargetClasses === false)) {\r\n        updateClasses(_this.target, addClasses, allClasses);\r\n      }\r\n      updateClasses(_this.element, addClasses, allClasses);\r\n    });\r\n\r\n    return true;\r\n  }\r\n});\r\n/* globals TetherBase */\r\n\r\n'use strict';\r\n\r\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\r\n\r\nTetherBase.modules.push({\r\n  position: function position(_ref) {\r\n    var top = _ref.top;\r\n    var left = _ref.left;\r\n\r\n    if (!this.options.shift) {\r\n      return;\r\n    }\r\n\r\n    var shift = this.options.shift;\r\n    if (typeof this.options.shift === 'function') {\r\n      shift = this.options.shift.call(this, { top: top, left: left });\r\n    }\r\n\r\n    var shiftTop = undefined,\r\n        shiftLeft = undefined;\r\n    if (typeof shift === 'string') {\r\n      shift = shift.split(' ');\r\n      shift[1] = shift[1] || shift[0];\r\n\r\n      var _shift = shift;\r\n\r\n      var _shift2 = _slicedToArray(_shift, 2);\r\n\r\n      shiftTop = _shift2[0];\r\n      shiftLeft = _shift2[1];\r\n\r\n      shiftTop = parseFloat(shiftTop, 10);\r\n      shiftLeft = parseFloat(shiftLeft, 10);\r\n    } else {\r\n      shiftTop = shift.top;\r\n      shiftLeft = shift.left;\r\n    }\r\n\r\n    top += shiftTop;\r\n    left += shiftLeft;\r\n\r\n    return { top: top, left: left };\r\n  }\r\n});\r\nreturn Tether;\r\n\r\n}));\r\n"]}